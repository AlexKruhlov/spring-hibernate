DROP TABLE IF EXISTS CONTACT_TEL_DETAIL;

DROP TABLE IF EXISTS CONTACT_HOBBY_DETAIL;

DROP TABLE IF EXISTS HOBBY;

DROP TABLE IF EXISTS Contact;

CREATE TABLE CONTACT(
ID SERIAL NOT NULL,
FIRST_NAME VARCHAR(60) NOT NULL,
LAST_NAME VARCHAR(40) NOT NULL,
BIRTH_DATE DATE,
VERSION INT NOT NULL DEFAULT 0,
UNIQUE (FIRST_NAME, LAST_NAME),
PRIMARY KEY (ID)
);

CREATE TABLE CONTACT_TEL_DETAIL(
ID SERIAL NOT NULL,
CONTACT_ID INT NOT NULL,
TEL_TYPE VARCHAR(20) NOT NULL,
TEL_NUMBER VARCHAR(20) NOT NULL,
VERSION INT NOT NULL DEFAULT 0,
UNIQUE (CONTACT_ID, TEL_TYPE),
PRIMARY KEY (ID),
CONSTRAINT FK_CONTACT_TEL_DETAIL_1 FOREIGN KEY (CONTACT_ID)
REFERENCES CONTACT (ID) ON DELETE CASCADE
);

CREATE TABLE HOBBY(
	HOBBY_ID VARCHAR(20) NOT NULL,
	PRIMARY KEY (HOBBY_ID)
);

CREATE TABLE CONTACT_HOBBY_DETAIL(
	CONTACT_ID INT NOT NULL,
	HOBBY_ID VARCHAR(20) NOT NULL,
	PRIMARY KEY (CONTACT_ID, HOBBY_ID),
	CONSTRAINT FK_CONTACT_HOBBY_DETAIL_1 FOREIGN KEY (CONTACT_ID)
	REFERENCES CONTACT (ID) ON DELETE CASCADE,
	CONSTRAINT FK_CONTACT_HOBBY_DETAIL_2 FOREIGN KEY (HOBBY_ID)
	REFERENCES HOBBY (HOBBY_ID)
);


INSERT INTO CONTACT (FIRST_NAME, LAST_NAME, BIRTH_DATE) VALUES ('Chris', 'Schaefer', '1981-05-03');

INSERT INTO CONTACT (FIRST_NAME, LAST_NAME, BIRTH_DATE) VALUES ('Schott', 'Tiger', '1990-11-02');

INSERT INTO CONTACT (FIRST_NAME, LAST_NAME, BIRTH_DATE) VALUES ('John', 'Smith', '1964-02-28');

INSERT INTO CONTACT_TEL_DETAIL (CONTACT_ID, TEL_TYPE, TEL_NUMBER) VALUES (1, 'Mobile', '1234567890');

INSERT INTO CONTACT_TEL_DETAIL (CONTACT_ID, TEL_TYPE, TEL_NUMBER) VALUES (1, 'Home', '1234567890');

INSERT INTO CONTACT_TEL_DETAIL (CONTACT_ID, TEL_TYPE, TEL_NUMBER) VALUES (2, 'Home', '1234567890');


INSERT INTO HOBBY (HOBBY_ID) VALUES ('Swimming');

INSERT INTO HOBBY (HOBBY_ID) VALUES ('Jogging');

INSERT INTO HOBBY (HOBBY_ID) VALUES ('Programming');

INSERT INTO HOBBY (HOBBY_ID) VALUES ('Movies');

INSERT INTO HOBBY (HOBBY_ID) VALUES ('Reading');


INSERT INTO CONTACT_HOBBY_DETAIL(CONTACT_ID, HOBBY_ID) VALUES (1,'Swimming');

INSERT INTO CONTACT_HOBBY_DETAIL(CONTACT_ID, HOBBY_ID) VALUES (1,'Movies');

INSERT INTO CONTACT_HOBBY_DETAIL(CONTACT_ID, HOBBY_ID) VALUES (2,'Swimming');
